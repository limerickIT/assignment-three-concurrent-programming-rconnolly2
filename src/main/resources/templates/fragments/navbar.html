<nav class="bg-white shadow" th:fragment="navbar">
    <div class="max-w-7xl mx-auto flex items-center justify-between py-4 px-6">

        <!-- Logo -->
        <a href="/" class="text-3xl font-bold text-green-800">Zelora</a>

        <!-- Desktop Search -->
        <form action="/search" method="get"
              class="hidden md:flex w-1/2 mx-6">
            <input name="q" type="search" placeholder="Search sustainable clothing..."
                   class="flex-grow border border-gray-300 rounded-l-md px-4 py-2 focus:outline-none">
            <button type="submit"
                    class="bg-green-700 text-white px-4 rounded-r-md">
                Search
            </button>
        </form>

        <!-- Desktop Menu -->
        <div class="hidden md:flex gap-6 items-center">

            <!-- When NOT logged in -->
            <div th:unless="${loggedIn}" class="flex gap-6 items-center">

                <a href="/login" class="flex items-center gap-2 text-gray-700 hover:text-green-700">
                    <i class="fa-solid fa-right-to-bracket"></i>
                    <span>Sign In</span>
                </a>

                <a href="/register" class="flex items-center gap-2 text-gray-700 hover:text-green-700">
                    <i class="fa-solid fa-user-plus"></i>
                    <span>Register</span>
                </a>
            </div>

            <!-- When logged in -->
            <div th:if="${loggedIn}" class="flex gap-6 items-center">

                <a href="/profile" class="flex items-center gap-2 text-gray-700 hover:text-green-700">
                    <i class="fa-solid fa-user"></i>
                    <span>My Profile</span>
                </a>

                <a href="/orders" class="flex items-center gap-2 text-gray-700 hover:text-green-700">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <span>My Orders</span>
                </a>

                <a href="/logout" class="flex items-center gap-2 text-gray-700 hover:text-green-700">
                    <i class="fa-solid fa-right-from-bracket"></i>
                    <span>Logout</span>
                </a>

            </div>

        </div>

        <!-- Burger button -->
        <button id="menu-btn" class="text-gray-700 block md:hidden">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
        </button>

    </div>

    <!-- MOBILE DROPDOWN -->
    <div id="mobile-menu"
         class="hidden flex-col bg-white shadow-lg px-6 pb-4 md:hidden">

        <div th:unless="${loggedIn}">
            <a href="/login" class="flex items-center gap-2 py-2 text-gray-700 hover:text-green-700">
                <i class="fa-solid fa-right-to-bracket"></i>
                <span>Sign In</span>
            </a>

            <a href="/register" class="flex items-center gap-2 py-2 text-gray-700 hover:text-green-700">
                <i class="fa-solid fa-user-plus"></i>
                <span>Register</span>
            </a>
        </div>

        <div th:if="${loggedIn}">
            <a href="/profile" class="flex items-center gap-2 py-2 text-gray-700 hover:text-green-700">
                <i class="fa-solid fa-user"></i>
                <span>My Profile</span>
            </a>

            <a href="/orders" class="flex items-center gap-2 py-2 text-gray-700 hover:text-green-700">
                <i class="fa-solid fa-bag-shopping"></i>
                <span>My Orders</span>
            </a>

            <a href="/logout" class="flex items-center gap-2 py-2 text-gray-700 hover:text-green-700">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Logout</span>
            </a>
        </div>

    </div>
</nav>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const menuBtn = document.getElementById("menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");

        menuBtn.addEventListener("click", () => {
            mobileMenu.classList.toggle("hidden");
        });
    });
</script>